<!DOCTYPE html>
<html>
<body>
    <input type="file" id="audioFile" accept="audio/*">
    <br><br>
    
    <button onclick="playNormal()">Odtwórz normalnie</button>
    <button onclick="playFast()">Odtwórz 2x szybciej</button>
    <button onclick="playHighPitch()">Odtwórz wyżej</button>
    
    <script>
        let audioContext;
        let audioBuffer;
        let source;
        
        document.getElementById('audioFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            const reader = new FileReader();
            
            reader.onload = function(event) {
                audioContext = new AudioContext();
                audioContext.decodeAudioData(event.target.result, function(buffer) {
                    audioBuffer = buffer;
                    console.log('Plik wczytany!');
                });
            };
            
            reader.readAsArrayBuffer(file);
        });
        
        function playNormal() {
            if (source) source.stop();
            source = audioContext.createBufferSource();
            source.buffer = audioBuffer;
            source.connect(audioContext.destination);
            source.start();
        }
        
        function playFast() {
            if (source) source.stop();
            source = audioContext.createBufferSource();
            source.buffer = audioBuffer;
            source.playbackRate.value = 2.0;
            source.connect(audioContext.destination);
            source.start();
        }
        
        function playHighPitch() {
            if (source) source.stop();
            source = audioContext.createBufferSource();
            source.buffer = audioBuffer;
            source.detune.value = 300;
            source.connect(audioContext.destination);
            source.start();
        }
    </script>
</body>
</html>